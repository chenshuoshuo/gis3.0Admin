webpackJsonp([4],{Jie3:function(t,e,o){(t.exports=o("FZ+f")(!1)).push([t.i,"\n.addZone {\n  margin-top: 20px;\n}\n.addZone .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n.addZone .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n}\n.addZone .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n}\n.addZone .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n}\n",""])},maxi:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("Zv1W"),a=o("4NSx"),l={name:"addZone",data:function(){var t=function(t,e,o){e?/^\d+(\.\d+)?$/.test(e)||/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/.test(e)?e>25||e<0?o(new Error("请输入0-25之间的数字")):o():o(new Error("地图等级必须为数字！")):o(new Error("请输入正确的地图等级"))},e=function(t,e,o){e?/^\d+(\.\d+)?$/.test(e)||/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/.test(e)?e>180||e<-180?o(new Error("请输入-180-180之间的数字")):o():o(new Error("经度值必须为数字！")):o(new Error("请输入正确的经度值"))},o=function(t,e,o){e?/^\d+(\.\d+)?$/.test(e)||/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/.test(e)?e>90||e<-90?o(new Error("请输入-90-90之间的数字")):o():o(new Error("纬度值必须为数字！")):o(new Error("请输入正确的纬度值"))};return{submitLoading:!1,ruleForm:{bboxLeftBottomLon:"",bboxLeftBottomLat:"",bboxRightTopLon:"",bboxRightTopLat:"",center_lon:"",center_lat:"",is2D:"",name:"",styleId:"",defaultZoom:"",minZoom:"",maxZoom:"",bbox:"",center:"",id:"",icon:""},addForm:{},styleList:[],rules:{name:[{validator:function(t,e,o){e?/[，\s_'’‘\"”“|\\~#$@%^&*!。;\/<>\?？]/.test(e)?o(new Error("地图名称不能包含特殊字符")):o():o(new Error("请输入地图名称"))},trigger:"blur"}],style_id:[{required:!0,message:"请选择地图样式",trigger:"change"}],default_zoom:[{validator:t,trigger:"blur"}],min_zoom:[{validator:t,trigger:"blur"}],max_zoom:[{validator:t,trigger:"blur"}],bboxLeftBottomLon:[{validator:e,trigger:"blur"}],bboxLeftBottomLat:[{validator:o,trigger:"blur"}],bboxRightTopLon:[{validator:e,trigger:"blur"}],bboxRightTopLat:[{validator:o,trigger:"blur"}],center_lon:[{validator:e,trigger:"blur"}],center_lat:[{validator:o,trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.ruleForm.id?e.updateZone():e.creatZone())})},beforeAvatarUpload:function(t){var e=this,o=t.raw,r=new FileReader;r.readAsDataURL(o),r.onload=function(){e.ruleForm.icon=r.result}},upload:function(t){},resetForm:function(t){this.ruleForm={},this.$refs.ruleForm.resetFields()},creatZone:function(){var t=this;this.submitLoading=!0,this.addForm.bbox=this.ruleForm.bboxLeftBottomLon+","+this.ruleForm.bboxLeftBottomLat+","+this.ruleForm.bboxRightTopLon+","+this.ruleForm.bboxLeftBottomLat,this.addForm.center=this.ruleForm.center_lon+","+this.ruleForm.center_lat,this.addForm.is2D=1==this.ruleForm.is2D,this.addForm.defaultZoom=this.ruleForm.defaultZoom,this.addForm.icon=this.ruleForm.icon,this.addForm.maxZoom=this.ruleForm.maxZoom,this.addForm.minZoom=this.ruleForm.minZoom,this.addForm.name=this.ruleForm.name,this.addForm.styleId=this.ruleForm.styleId,Object(r.a)(this.addForm).then(function(e){t.submitLoading=!1,0===e.data.code&&t.$alert("区域创建成功！","消息提示",{confirmButtonText:"确定"}).then(function(){t.resetForm("ruleForm"),t.$router.push({path:"/zoneManger/page"})})})},updateZone:function(){var t=this;this.submitLoading=!0,this.addForm.bbox=this.ruleForm.bboxLeftBottomLon+","+this.ruleForm.bboxLeftBottomLat+","+this.ruleForm.bboxRightTopLon+","+this.ruleForm.bboxLeftBottomLat,this.addForm.center=this.ruleForm.center_lon+","+this.ruleForm.center_lat,this.addForm.is2D=1==this.ruleForm.is2D,this.addForm.defaultZoom=this.ruleForm.defaultZoom,this.addForm.icon=this.ruleForm.icon,this.addForm.maxZoom=this.ruleForm.maxZoom,this.addForm.minZoom=this.ruleForm.minZoom,this.addForm.name=this.ruleForm.name,this.addForm.id=this.ruleForm.id,this.addForm.styleId=this.ruleForm.styleId,Object(r.c)(this.addForm).then(function(e){t.submitLoading=!1,0===e.data.code&&t.$alert("区域更新成功！","消息提示",{confirmButtonText:"确定",callback:function(){t.resetForm("ruleForm"),t.$router.push({path:"/zoneManger/page"})}})})}},mounted:function(){var t=this;this.$route.query.id&&Object(r.d)(this.$route.query.id).then(function(e){var o=e.data.data.bbox.split(","),r=e.data.data.center.split(",");t.ruleForm.bboxLeftBottomLon=o[0],t.ruleForm.bboxLeftBottomLat=o[1],t.ruleForm.bboxRightTopLon=o[2],t.ruleForm.bboxRightTopLat=o[3],t.ruleForm.center_lon=r[0],t.ruleForm.center_lat=r[1],t.ruleForm.defaultZoom=e.data.data.defaultZoom,t.ruleForm.minZoom=e.data.data.minZoom,t.ruleForm.maxZoom=e.data.data.maxZoom,t.ruleForm.icon=e.data.data.icon,t.ruleForm.is2D=e.data.data.is2D?1:0,t.ruleForm.styleId=e.data.data.styleId,t.ruleForm.name=e.data.data.name,t.ruleForm.id=e.data.data.id});Object(a.d)({page:0,pageSize:100}).then(function(e){t.styleList=e.data.data.content})}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"addZone"},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{"padding-right":"20px"},attrs:{model:t.ruleForm,"label-width":"120px"}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{md:5,sm:8}},[o("el-form-item",{attrs:{label:"是否是二维:",prop:"is2D"}},[o("el-select",{attrs:{placeholder:"请选择地图类型"},model:{value:t.ruleForm.is2D,callback:function(e){t.$set(t.ruleForm,"is2D",e)},expression:"ruleForm.is2D"}},[o("el-option",{attrs:{label:"是",value:1}}),t._v(" "),o("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),t._v(" "),o("el-col",{attrs:{md:5,sm:8}},[o("el-form-item",{attrs:{label:"地图名称:",prop:"name"}},[o("el-input",{attrs:{placeholder:"地图名称"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1)],1),t._v(" "),o("el-col",{attrs:{md:5,sm:8}},[o("el-form-item",{attrs:{label:"地图样式:",prop:"styleId"}},[o("el-select",{attrs:{placeholder:"请选择地图样式"},model:{value:t.ruleForm.styleId,callback:function(e){t.$set(t.ruleForm,"styleId",e)},expression:"ruleForm.styleId"}},t._l(t.styleList,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{md:5,sm:8}},[o("el-form-item",{attrs:{label:"默认地图等级:",prop:"defaultZoom"}},[o("el-input",{attrs:{placeholder:"默认地图等级",type:"number"},model:{value:t.ruleForm.defaultZoom,callback:function(e){t.$set(t.ruleForm,"defaultZoom",e)},expression:"ruleForm.defaultZoom"}})],1)],1),t._v(" "),o("el-col",{attrs:{md:5}},[o("el-form-item",{attrs:{label:"最小等级:",prop:"minZoom"}},[o("el-input",{attrs:{placeholder:"最小等级",type:"number"},model:{value:t.ruleForm.minZoom,callback:function(e){t.$set(t.ruleForm,"minZoom",e)},expression:"ruleForm.minZoom"}})],1)],1),t._v(" "),o("el-col",{attrs:{md:5,sm:8}},[o("el-form-item",{attrs:{label:"最大等级:",prop:"maxZoom"}},[o("el-input",{attrs:{placeholder:"最大等级",type:"number"},model:{value:t.ruleForm.maxZoom,callback:function(e){t.$set(t.ruleForm,"maxZoom",e)},expression:"ruleForm.maxZoom"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:2}},[o("el-col",{attrs:{md:5,sm:8}},[o("el-form-item",{attrs:{label:"包围盒子:",prop:"bboxLeftBottomLon"}},[o("el-input",{attrs:{placeholder:"左下角经度",type:"number"},model:{value:t.ruleForm.bboxLeftBottomLon,callback:function(e){t.$set(t.ruleForm,"bboxLeftBottomLon",e)},expression:"ruleForm.bboxLeftBottomLon"}})],1)],1),t._v(" "),o("el-col",{attrs:{md:5,sm:8}},[o("el-form-item",{attrs:{prop:"bboxLeftBottomLat"}},[o("el-input",{attrs:{placeholder:"左下角纬度",type:"number"},model:{value:t.ruleForm.bboxLeftBottomLat,callback:function(e){t.$set(t.ruleForm,"bboxLeftBottomLat",e)},expression:"ruleForm.bboxLeftBottomLat"}})],1)],1),t._v(" "),o("el-col",{attrs:{md:5,sm:8}},[o("el-form-item",{attrs:{prop:"bboxRightTopLon"}},[o("el-input",{attrs:{placeholder:"右上角经度",type:"number"},model:{value:t.ruleForm.bboxRightTopLon,callback:function(e){t.$set(t.ruleForm,"bboxRightTopLon",e)},expression:"ruleForm.bboxRightTopLon"}})],1)],1),t._v(" "),o("el-col",{attrs:{md:5,sm:8}},[o("el-form-item",{attrs:{prop:"bboxRightTopLat"}},[o("el-input",{attrs:{placeholder:"右上角纬度",type:"number"},model:{value:t.ruleForm.bboxRightTopLat,callback:function(e){t.$set(t.ruleForm,"bboxRightTopLat",e)},expression:"ruleForm.bboxRightTopLat"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:2}},[o("el-col",{attrs:{md:5,sm:10}},[o("el-form-item",{attrs:{label:"地图中心点:",prop:"center_lon"}},[o("el-input",{attrs:{placeholder:"中心点经度",type:"number"},model:{value:t.ruleForm.center_lon,callback:function(e){t.$set(t.ruleForm,"center_lon",e)},expression:"ruleForm.center_lon"}})],1)],1),t._v(" "),o("el-col",{attrs:{md:5,sm:10}},[o("el-form-item",{attrs:{prop:"center_lat"}},[o("el-input",{attrs:{placeholder:"中心点纬度",type:"number"},model:{value:t.ruleForm.center_lat,callback:function(e){t.$set(t.ruleForm,"center_lat",e)},expression:"ruleForm.center_lat"}})],1)],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"地图ICON:",prop:"icon"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":t.upload,"show-file-list":!1,"on-change":t.beforeAvatarUpload}},[t.ruleForm.icon?o("img",{staticClass:"avatar",attrs:{src:t.ruleForm.icon}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("建议尺寸88 x 88(px)")])])],1),t._v(" "),o("el-form-item",[o("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.submitLoading,expression:"submitLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary",size:"medium"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("提交")]),t._v(" "),o("el-button",{attrs:{size:"medium"},on:{click:function(e){t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1)},staticRenderFns:[]};var i=o("VU/8")(l,m,!1,function(t){o("w8vJ")},null,null);e.default=i.exports},w8vJ:function(t,e,o){var r=o("Jie3");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);o("rjj0")("67a9d5cd",r,!0)}});